<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newton and Gravity</title>
    <style>
        /* --- 1. THE 3D LOADING SCREEN --- */
        #loading-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #5b42f3;
            display: flex; justify-content: center; align-items: center;
            z-index: 100; transition: opacity 0.8s ease;
        }
        .loading-card {
            background: #f0f0f0; padding: 40px; border-radius: 30px;
            width: 320px; box-shadow: 15px 15px 30px rgba(0,0,0,0.2);
            position: relative; text-align: center;
        }
        .loading-text { font-family: 'Arial Black', sans-serif; color: #d1d1d1; letter-spacing: 4px; font-size: 20px; text-shadow: 1px 1px white; margin: 0; }
        .progress-container {
            background: #d1d1d1; height: 30px; border-radius: 15px; margin-top: 25px;
            position: relative; box-shadow: inset 4px 4px 8px rgba(0,0,0,0.1); overflow: hidden;
        }
        #progress-bar { height: 100%; width: 0%; background: #7c5cfc; border-radius: 15px; transition: width 0.1s; }

        /* --- 2. THE UNIQUE TITLE SCREEN --- */
        body { 
            margin: 0; background: #87CEEB; font-family: 'Segoe UI', sans-serif; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;
        }
        
        #home-screen { text-align: center; z-index: 10; }

        .game-title {
            font-family: 'Arial Black', sans-serif; font-size: 55px;
            background: linear-gradient(to bottom, #ff5f56, #b71c1c);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(4px 4px 0px #3e2723);
            margin: 0; animation: titleSway 3s ease-in-out infinite;
        }

        @keyframes titleSway { 0%, 100% { transform: translateY(0) rotate(-1deg); } 50% { transform: translateY(-15px) rotate(1deg); } }

        .btn-start {
            margin-top: 30px; padding: 15px 40px; font-size: 24px; font-weight: bold;
            color: white; background: #7c5cfc; border: none; border-radius: 50px;
            cursor: pointer; box-shadow: 0 10px 0 #5b42f3; transition: 0.1s;
        }
        .btn-start:active { transform: translateY(5px); box-shadow: 0 5px 0 #5b42f3; }

        /* --- 3. THE GAME STAGE --- */
        #game-canvas { 
            display: none; border: 10px solid #3e2723; border-radius: 20px; 
            background: linear-gradient(#87CEEB, #e0f7fa); box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="loading-card">
            <h1 class="loading-text">LOADING</h1>
            <div class="progress-container"><div id="progress-bar"></div></div>
        </div>
    </div>

    <div id="home-screen">
        <h1 class="game-title">Newton and Gravity</h1>
        <button class="btn-start" onclick="startGame()">START GAME</button>
    </div>

    <canvas id="game-canvas" width="400" height="500"></canvas>

<script>
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    const homeScreen = document.getElementById('home-screen');
    const progressBar = document.getElementById('progress-bar');
    const loadingScreen = document.getElementById('loading-screen');

    let score = 0, lives = 3, gameActive = false;
    let apple = { x: 200, y: -20, speed: 4 };
    let newton = { x: 170, y: 400, width: 60 };
    let breeze = 0;

    // Loading Logic
    let progress = 0;
    const loadInt = setInterval(() => {
        progress += 5;
        progressBar.style.width = progress + '%';
        if (progress >= 100) {
            clearInterval(loadInt);
            loadingScreen.style.opacity = '0';
            setTimeout(() => loadingScreen.style.display = 'none', 800);
        }
    }, 50);

    function startGame() {
        homeScreen.style.display = 'none';
        canvas.style.display = 'block';
        gameActive = true;
        update();
    }

    function drawTree() {
        ctx.fillStyle = '#5d4037';
        ctx.fillRect(20, 300, 40, 200);
        breeze += 0.03;
        let sway = Math.sin(breeze) * 10;
        ctx.fillStyle = '#2e7d32';
        ctx.beginPath();
        ctx.arc(40 + sway, 280, 50, 0, Math.PI*2);
        ctx.arc(80 + sway, 250, 60, 0, Math.PI*2);
        ctx.arc(10 + sway, 240, 50, 0, Math.PI*2);
        ctx.fill();
    }

    function drawNewton() {
        // Newton in Blue Outfit (Code-drawn for zero external files)
        ctx.fillStyle = "#0d47a1"; // Blue coat
        ctx.fillRect(newton.x, newton.y + 20, 60, 60);
        ctx.fillStyle = "#ffccbc"; // Face
        ctx.beginPath(); ctx.arc(newton.x + 30, newton.y + 10, 20, 0, Math.PI*2); ctx.fill();
        ctx.fillStyle = "white"; // Wig
        ctx.beginPath(); ctx.arc(newton.x + 10, newton.y + 10, 12, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(newton.x + 50, newton.y + 10, 12, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(newton.x + 30, newton.y - 5, 15, 0, Math.PI*2); ctx.fill();
    }

    function update() {
        if (!gameActive) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        drawTree();
        drawNewton();
        
        // Apple Logic
        ctx.fillStyle = "red";
        ctx.beginPath(); ctx.arc(apple.x, apple.y, 15, 0, Math.PI*2); ctx.fill();
        apple.y += apple.speed;

        if (apple.y > newton.y && apple.x > newton.x && apple.x < newton.x + 60) {
            score++; resetApple();
        } else if (apple.y > 500) {
            lives--; resetApple();
        }

        ctx.fillStyle = "#1b5e20";
        ctx.font = "bold 20px Arial";
        ctx.fillText("Score: " + score, 300, 30);
        ctx.fillText("Lives: " + lives, 300, 60);

        if (lives > 0) requestAnimationFrame(update);
        else alert("Game Over! Score: " + score);
    }

    function resetApple() {
        apple.y = -20;
        apple.x = Math.random() * 300 + 50;
        apple.speed += 0.2;
    }

    window.addEventListener('keydown', (e) => {
        if (e.key === "ArrowLeft" && newton.x > 0) newton.x -= 30;
        if (e.key === "ArrowRight" && newton.x < 340) newton.x += 30;
    });
</script>
</body>
</html>
